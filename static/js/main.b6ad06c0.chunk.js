(this.webpackJsonpbalance=this.webpackJsonpbalance||[]).push([[0],{39:function(e,t,a){e.exports=a(62)},58:function(e,t,a){},59:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),s=a.n(c),u=a(4),l=a(22),i=a(14),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Signed_In":return Object(i.a)({},e,{authenticated:!0,userName:t.userName,email:t.email});case"Signed_Out":return Object(i.a)({},e,{authenticated:!1,userName:void 0,email:void 0});default:return Object(i.a)({},e)}},m=function(e,t){switch(t.type){case"Transaction_Request":return Object(i.a)({},e,{logPayment:!1});case"Toggle_Log":var a=Object(i.a)({},e);return Object(i.a)({},e,{logPayment:!a.logPayment});default:return Object(i.a)({},e)}},d=Object(l.b)({NavbarReducer:o,HomeReducer:m}),p=a(26),h={apiKey:"AIzaSyDmfsN46iQMZ-q_LwpBLUfRcbxZxxJdxyk",authDomain:"balance-app-1a.firebaseapp.com",databaseURL:"https://balance-app-1a.firebaseio.com",projectId:"balance-app-1a",storageBucket:"balance-app-1a.appspot.com",messagingSenderId:"628409872793",appId:"1:628409872793:web:110dacebe39e6d2a73e308"};p.initializeApp(h);var b=p.database(),E=new p.auth.GoogleAuthProvider,v=(a(58),a(59),a(5)),f=a(6),N=a(7),y=a(8),g=function(e){return e.status?r.a.createElement("button",{className:"btn btn-outline-success",onClick:e.signOut},"Sign Out"):r.a.createElement("button",{className:"btn btn-outline-success",onClick:e.signIn},"Sign In")},O=a(12),j=function(e){return e.status?r.a.createElement("span",{className:"navbar-text"},r.a.createElement(O.b,{to:"/"}," To ",e.userName,"'s Dashboard ")):r.a.createElement("span",{className:"navbar-text"},"Login Using Your Google Account")},R=function(e,t){return{email:e,userName:t,balance:0,pendingNotification:!1,preferences:!1}},C=a(17),T=a.n(C),k=a(23),S=function(e){var t=e.split("@")[0];return(t=t.replace(/\./g,"|")).toLowerCase()},P=function(){var e=Object(k.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=b.ref("users/"+S(t)+"/userName"),e.abrupt("return",a.once("value"));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).handleStatus=function(){var e=p.auth().currentUser;e?(!function(e,t){var a="users/".concat(S(e.email),"/");b.ref(a).once("value").then((function(n){if(!n.exists()){var r=t(e.email,e.displayName);for(var c in r)r.hasOwnProperty(c)&&b.ref(a+c).set(r[c])}}))}(e,R),n.props.SignedIn(e.displayName,e.email)):n.props.SignedOut()},n.signIn=function(){p.auth().signInWithPopup(E),n.handleStatus()},n.signOut=function(){p.auth().signOut(),n.handleStatus()},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;p.auth().onAuthStateChanged((function(t){e.handleStatus()}))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(O.b,{to:"/",className:"navbar-brand"},"Balance"),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(j,{status:this.props.authenticated,userName:this.props.userName}))),r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(g,{status:this.props.authenticated,signIn:this.signIn,signOut:this.signOut}))))}}]),a}(r.a.Component),q=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),(function(e){return{SignedIn:function(t,a){e(function(e,t){return{type:"Signed_In",userName:e,email:t}}(t,a))},SignedOut:function(){e({type:"Signed_Out"})}}}))(D),x=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).handleInput=function(e){n.setState({email:e.target.value},Object(k.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.state.email.length>1)){e.next=5;break}return e.next=3,P(n.state.email);case 3:(t=e.sent)&&t.exists()?n.setState({userName:t.val()}):n.setState({userName:void 0});case 5:case"end":return e.stop()}}),e)}))))},n.state={email:"",userName:void 0},n}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Find A User"),r.a.createElement("input",{className:"form-control mx-auto w-50 ",type:"text",placeholder:"@gmail.com",value:this.state.email,onChange:this.handleInput}),r.a.createElement("div",null,r.a.createElement(O.b,{to:"/user/"+S(this.state.email),className:"btn"}," ",r.a.createElement("h3",null,this.state.userName)," ")))}}]),a}(r.a.Component),I=a(34),L=function(e){var t=e.obj;return r.a.createElement("div",null,r.a.createElement("h5",null,t.status),r.a.createElement("h5",null,"Sender : ",t.senderName," ",r.a.createElement("small",null,"(",t.requestSender,")")),r.a.createElement("h5",null,"Receiver : ",t.receiverName," ",r.a.createElement("small",null,"(",t.requestReceiver,")")),r.a.createElement("h6",null,"Sender Wants To ","getPaid"===t.type?"Get Paid":"Pay"),r.a.createElement("h5",null,"Amount : ",t.amount),r.a.createElement("h6",null,"Descrpition : ",t.desc))},w=function(e,t){"accept"===t?b.ref("transactionRequests/".concat(e.key,"/status")).set("ACCEPTED"):"decline"===t?b.ref("transactionRequests/".concat(e.key,"/status")).set("REJECTED"):b.ref("transactionRequests/".concat(e.key,"/status")).set("COMPLETED")},A=function(e){var t=e.data.val();return"REJECTED"===e.type&&"REJECTED"===t.status?r.a.createElement("div",{className:"card"},r.a.createElement(L,{obj:t})):"ACCEPTED"===e.type&&"ACCEPTED"===t.status?r.a.createElement("div",{className:"card"},r.a.createElement(L,{obj:t}),t.requestReceiver===e.userKey&&"pay"===t.type||t.requestSender===e.userKey&&"getPaid"===t.type?r.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){return w(e.data,"mark")}}," Mark As Completed "):void 0):"PENDING_SENT"===e.type&&t.requestSender===e.userKey&&"PENDING"===t.status?r.a.createElement("div",{className:"card"},r.a.createElement(L,{obj:t})):"PENDING_RECEIVED"===e.type&&t.requestReceiver===e.userKey&&"PENDING"===t.status?r.a.createElement("div",{className:"card"},r.a.createElement(L,{obj:t}),r.a.createElement("button",{className:"btn btn-outline-success",onClick:function(){return w(e.data,"accept")}}," Accept "),r.a.createElement("button",{className:"btn btn-outline-danger",onClick:function(){return w(e.data,"decline")}}," Decline ")):"COMPLETED"===e.type&&"COMPLETED"===t.status?r.a.createElement("div",{className:"card"},r.a.createElement(L,{obj:t})):null},U=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).handleClick=function(e){n.setState({mode:e.target.id,title:e.target.innerText})},n.state={requestsReceived:[],requestsSent:[],mode:"PENDING_RECIEVED",title:"Pending You Received"},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;b.ref("transactionRequests").orderByChild("requestReceiver").equalTo(S(this.props.email)).on("value",(function(t){var a=[];t.forEach((function(e){return a.push(e),!1})),e.setState((function(e){return Object(i.a)({},e,{requestsReceived:[].concat(a)})}))})),b.ref("transactionRequests").orderByChild("requestSender").equalTo(S(this.props.email)).on("value",(function(t){var a=[];t.forEach((function(e){return a.push(e),!1})),e.setState((function(e){return Object(i.a)({},e,{requestsSent:[].concat(a)})}))}))}},{key:"componentWillUnmount",value:function(){b.ref("transactionRequests").off()}},{key:"render",value:function(){var e=this;return this.props.authenticated?r.a.createElement("div",{className:"container"},r.a.createElement("h3",null,"Transaction Requests"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md"},r.a.createElement("button",{className:"btn btn-outline-success",id:"PENDING_RECEIVED",onClick:this.handleClick},"Pending You Received")),r.a.createElement("div",{className:"col-md"},r.a.createElement("button",{className:"btn btn-outline-success",id:"COMPLETED",onClick:this.handleClick},"Completed Requests")),r.a.createElement("div",{className:"col-md"},r.a.createElement("button",{className:"btn btn-outline-success",id:"ACCEPTED",onClick:this.handleClick},"Accepted Requests")),r.a.createElement("div",{className:"col-md"},r.a.createElement("button",{className:"btn btn-outline-success",id:"REJECTED",onClick:this.handleClick},"Rejected Requests")),r.a.createElement("div",{className:"col-md"},r.a.createElement("button",{className:"btn btn-outline-success",id:"PENDING_SENT",onClick:this.handleClick},"Pending You Sent"))),r.a.createElement("hr",null),r.a.createElement("br",null),r.a.createElement("h2",null,this.state.title),r.a.createElement("ul",{className:"list-unstyled",id:"REQUEST_LIST"},[].concat(Object(I.a)(this.state.requestsReceived),Object(I.a)(this.state.requestsSent)).map((function(t){return r.a.createElement("li",null," ",r.a.createElement(A,{data:t,type:e.state.mode,userKey:S(e.props.email)})," ")}))),r.a.createElement("h6",null,"x-- End Of The List --x")):r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"You May Wanna Login First"))}}]),a}(r.a.Component),K=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),null)(U),M=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){return Object(v.a)(this,a),t.call(this,e)}return Object(f.a)(a,[{key:"render",value:function(){return this.props.authenticated?r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Dashboard"),r.a.createElement("hr",null),r.a.createElement(O.b,{to:"/contacts",className:"btn btn-outline-success"},"Recently Contacted"),r.a.createElement(x,null),r.a.createElement("hr",null),r.a.createElement(K,null)):r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"You May Wanna Login First"))}}]),a}(r.a.Component),_=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),null)(M),G=function(e,t,a){return{requestSender:e,requestReceiver:t,status:"PENDING",senderName:a.senderName,receiverName:a.receiverName,desc:a.desc,amount:a.amount,type:a.type}},Y=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).handleChange=function(e){e.preventDefault();var t=e.target.id,a=e.target.value,r={};"amount"===t&&(a=isNaN(a)||a<0?0:a,a=Number(a)),r[t]=a,n.setState(r)},n.handleTransaction=function(){var e={desc:n.state.desc,amount:n.state.amount,type:n.state.paymentType,senderName:n.props.senderName,receiverName:n.props.receiverName};!function(e){var t=b.ref("transactionRequests");t.push(e),(t=b.ref("users/".concat(e.requestReciever,"/pendingNotification"))).set(!0)}(G(n.props.from,n.props.to,e)),n.props.TransactionRequest()},n.state={paymentType:"pay",amount:0,desc:""},n}return Object(f.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("form",null,r.a.createElement("label",{for:"paymentType"},"Payment Type "),r.a.createElement("select",{className:"form-control",id:"paymentType",value:this.state.paymentType,onChange:this.handleChange},r.a.createElement("option",{value:"pay"},"I Got To Pay You"),r.a.createElement("option",{value:"getPaid"},"You Got To Pay Me")),r.a.createElement("br",null),r.a.createElement("label",{for:"amount"},"Amount"),r.a.createElement("input",{type:"text",className:"form-control",id:"amount",value:this.state.amount,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("lable",{for:"desc"},"Description"),r.a.createElement("textarea",{className:"form-control",id:"desc",value:this.state.desc,onChange:this.handleChange}),r.a.createElement("br",null)),r.a.createElement("button",{className:"btn btn-outline-success",id:"done",onClick:this.handleTransaction}," Done "))}}]),a}(r.a.Component),W=Object(u.b)(null,(function(e){return{TransactionRequest:function(){e({type:"Transaction_Request"})}}}))(Y),B=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={foreignUser:void 0},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;Object(k.a)(T.a.mark((function t(){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=void 0,!e.props.userKey){t.next=5;break}return t.next=4,P(e.props.userKey);case 4:a=t.sent;case 5:a&&a.exists()?e.setState({foreignUser:a.val()}):e.setState({foreignUser:void 0});case 6:case"end":return t.stop()}}),t)})))()}},{key:"render",value:function(){return this.props.authenticated?this.state.foreignUser?(b.ref("users/".concat(S(this.props.email),"/preferences/contacts/").concat(this.props.userKey)).set(this.state.foreignUser),r.a.createElement("div",null,r.a.createElement("h2",null," Welcome To The Profile Of ",this.state.foreignUser," "),r.a.createElement("button",{className:"btn btn-outline-success",onClick:this.props.ToggleLog}," ",this.props.logPayment?"Done For Now":"Log A Payment"," "),this.props.logPayment?r.a.createElement(W,{from:S(this.props.email),to:this.props.userKey,receiverName:this.state.foreignUser,senderName:this.props.userName}):void 0)):r.a.createElement("h1",null,"Looking For This User ..."):r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"You May Wanna Login First"))}}]),a}(r.a.Component),F=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email,logPayment:e.HomeReducer.logPayment}}),(function(e){return{ToggleLog:function(){e({type:"Toggle_Log"})}}}))(B),J=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){return Object(v.a)(this,a),t.call(this,e)}return Object(f.a)(a,[{key:"render",value:function(){return this.props.authenticated?this.props.email&&this.props.match.params.id===S(this.props.email)?r.a.createElement(_,null):r.a.createElement(F,{userKey:this.props.match.params.id}):r.a.createElement("div",{className:"container"},r.a.createElement("h2",null,"You Got To Login First .. To Start Using The App"))}}]),a}(r.a.Component),V=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),null)(J),z=a(18),H=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),null)((function(e){return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Welcome To The Balance App"),r.a.createElement("p",null,"This app is basically a balance manger. You can send requests to your friends for the amount they owe you and all that stuff"),r.a.createElement("footer",null,"Created With \u2665 By thegitone23"),e.authenticated?r.a.createElement(z.a,{to:"/user/"+S(e.email)}):void 0)})),Q=function(e){if(e.userKey)return r.a.createElement("div",{className:"card"},r.a.createElement("li",{className:"tile"},r.a.createElement(O.b,{to:"/user/".concat(e.userKey)},r.a.createElement("h1",null,e.userName),r.a.createElement("h2",null,e.userKey))))},Z=function(e){Object(y.a)(a,e);var t=Object(N.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).state={contacted:{}},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.authenticated&&b.ref("users/".concat(S(this.props.email),"/preferences/contacts")).once("value",(function(t){t.exists()&&e.setState({contacted:t.val()})}))}},{key:"render",value:function(){if(this.props.authenticated){var e=[],t=[];for(var a in this.state.contacted)e.push(a),t.push(this.state.contacted[a]);return r.a.createElement("div",{className:"container"},r.a.createElement("ul",{className:"list-unstyled"},e.map((function(e,a){return r.a.createElement(Q,{userKey:e,userName:t[a]})}))),r.a.createElement("h6",null,"x-- End Of The List --x"))}return r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"You May Wanna Login First"))}}]),a}(r.a.Component),X=Object(u.b)((function(e){return{authenticated:e.NavbarReducer.authenticated,userName:e.NavbarReducer.userName,email:e.NavbarReducer.email}}),null)(Z),$=Object(l.c)(d);s.a.render(r.a.createElement(u.a,{store:$},r.a.createElement(O.a,null,r.a.createElement("div",{className:"container text-center"},r.a.createElement(q,null),r.a.createElement(z.d,null,r.a.createElement(z.b,{path:"/",component:H,exact:!0}),r.a.createElement(z.b,{path:"/contacts",component:X,exact:!0}),r.a.createElement(z.b,{path:"/user/:id",component:V}))))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.b6ad06c0.chunk.js.map